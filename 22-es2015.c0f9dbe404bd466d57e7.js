(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"6Q79":function(e,t,n){"use strict";n.r(t),n.d(t,"TareaspendientesPageModule",(function(){return b}));var a=n("ofXK"),i=n("3Pt+"),o=n("TEn/"),s=n("tyNb"),r=n("LvDl"),c=n("fXoL"),l=n("nVU4");function u(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-button",7),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).empezar()})),c["\u0275\u0275text"](1,"EMPEZAR"),c["\u0275\u0275elementEnd"]()}}function p(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-content"),c["\u0275\u0275elementStart"](1,"ag-grid-angular",5),c["\u0275\u0275listener"]("selectionChanged",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onSelectionChanged(t)}))("firstDataRendered",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onFirstDataRendered(t)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](2,u,2,0,"ion-button",6),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("rowData",e.rowData)("columnDefs",e.columnDefs)("rowSelection",e.rowSelection),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.show)}}function h(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-content"),c["\u0275\u0275elementStart"](1,"ion-item"),c["\u0275\u0275elementStart"](2,"ion-label",8),c["\u0275\u0275text"](3,"\xbfQu\xe9 te ha parecido la prueba? \xbfHas tenido alg\xfan problema? \xbfLo has entendido bien?"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"ion-item"),c["\u0275\u0275elementStart"](5,"ion-textarea",9),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().opinion=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"ion-button",7),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().finalizar()})),c["\u0275\u0275text"](7,"FINALIZAR TAREA"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngModel",e.opinion)}}function d(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-item"),c["\u0275\u0275elementStart"](1,"ion-label",12),c["\u0275\u0275text"](2,"Responda aqu\xed"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"ion-input",13),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).respuesta=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngModel",e.respuesta)}}function m(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-list"),c["\u0275\u0275elementStart"](1,"ion-grid"),c["\u0275\u0275elementStart"](2,"ion-row"),c["\u0275\u0275elementStart"](3,"ion-col"),c["\u0275\u0275elementStart"](4,"ion-item",14),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).seleccionarOopcion("A")})),c["\u0275\u0275elementStart"](5,"ion-label"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"ion-col"),c["\u0275\u0275elementStart"](8,"ion-item",14),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).seleccionarOopcion("B")})),c["\u0275\u0275elementStart"](9,"ion-label"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"ion-row"),c["\u0275\u0275elementStart"](12,"ion-col"),c["\u0275\u0275elementStart"](13,"ion-item",14),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).seleccionarOopcion("C")})),c["\u0275\u0275elementStart"](14,"ion-label"),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"ion-col"),c["\u0275\u0275elementStart"](17,"ion-item",14),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).seleccionarOopcion("D")})),c["\u0275\u0275elementStart"](18,"ion-label"),c["\u0275\u0275text"](19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](4),c["\u0275\u0275propertyInterpolate"]("color",e.claseSeleccionadaA),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("A) ",e.opcionA,""),c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate"]("color",e.claseSeleccionadaB),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("B) ",e.opcionB,""),c["\u0275\u0275advance"](3),c["\u0275\u0275propertyInterpolate"]("color",e.claseSeleccionadaC),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("C) ",e.opcionC,""),c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate"]("color",e.claseSeleccionadaD),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("D) ",e.opcionD,"")}}function g(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-content"),c["\u0275\u0275elementStart"](1,"ion-item"),c["\u0275\u0275elementStart"](2,"ion-label",10),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"ion-textarea",11),c["\u0275\u0275listener"]("ngModelChange",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().pregunta=t})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](5,d,4,1,"ion-item",4),c["\u0275\u0275template"](6,m,20,8,"ion-list",4),c["\u0275\u0275elementStart"](7,"ion-button",7),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().continuar()})),c["\u0275\u0275text"](8,"CONTINUAR"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"]("Pregunta n\xfamero ",e.numero,""),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",e.pregunta),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.pruebaCompletar),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.pruebaTest)}}const S=[{path:"",component:(()=>{class e{constructor(e,t){this.changeDetectorRef=e,this.router=t,this.numero=1,this.user=localStorage.getItem("user"),this.rowSelection="single",this.show=!1,this.idSelect="",this.tipoSelect="",this.grupo=localStorage.getItem("grupo"),this.showPrueba=!1,this.showTabla=!0,this.rowData=[],this.columnDefs=[{headerName:"Nombre de la Prueba",field:"titulo",sortable:!0,filter:!0},{headerName:"Asignatura",field:"asignatura",sortable:!0,filter:!0}],this.pregunta="",this.respuestaCorrecta="",this.respuesta="",this.pruebaCompletar=!1,this.pruebaTest=!1,this.opcionA="",this.opcionB="",this.opcionC="",this.opcionD="",this.claseSeleccionadaA="",this.claseSeleccionadaB="",this.claseSeleccionadaC="",this.claseSeleccionadaD="",this.examen={preguntas:[],tiempoTotal:0,calificaci\u00f3n:0,alumno:this.user,grupo:this.grupo,idPrueba:this.idSelect,opinion:""},this.showEvaluacion=!1,this.opinion=""}ngOnInit(){this.pruebas=JSON.parse(localStorage.getItem("pruebas"))||[];let e=JSON.parse(localStorage.getItem("completadas_"+this.user))||[];for(let t of this.pruebas)-1!=t.grupos.indexOf(this.grupo)&&-1==e.indexOf(t.id)&&"ABIERTA"==t.abierta&&this.rowData.push(t)}ngDoCheck(){this.changeDetectorRef.detectChanges()}onFirstDataRendered(e){this.gridApi=e.api,e.api.sizeColumnsToFit()}onSelectionChanged(e){this.idSelect="",this.tipoSelect="";let t=e.api.getSelectedRows();this.idSelect=t[0].id,this.tipoSelect=t[0].tipo,this.pruebaSelect=t[0],this.show=!0,this.changeDetectorRef.detectChanges()}empezar(){this.showTabla=!1,this.showPrueba=!0,this.pruebaCompletar=!1,this.pruebaTest=!1,this.examen.idPrueba=this.idSelect,"TEST"==this.tipoSelect?(this.pruebaTest=!0,this.pruebaCompletar=!1):"COMPLETAR"==this.tipoSelect&&(this.pruebaCompletar=!0,this.pruebaTest=!1),this.preguntaActual=0,this.pregunta=this.pruebaSelect.preguntas[this.preguntaActual].pregunta,this.respuesta="",this.respuestaCorrecta=this.pruebaSelect.preguntas[this.preguntaActual].correcta,this.opcionA=this.pruebaSelect.preguntas[this.preguntaActual].respuestas?this.pruebaSelect.preguntas[this.preguntaActual].respuestas[0].texto:"",this.opcionB=this.pruebaSelect.preguntas[this.preguntaActual].respuestas?this.pruebaSelect.preguntas[this.preguntaActual].respuestas[1].texto:"",this.opcionC=this.pruebaSelect.preguntas[this.preguntaActual].respuestas?this.pruebaSelect.preguntas[this.preguntaActual].respuestas[2].texto:"",this.opcionD=this.pruebaSelect.preguntas[this.preguntaActual].respuestas?this.pruebaSelect.preguntas[this.preguntaActual].respuestas[3].texto:"",this.cronometro("start"),this.changeDetectorRef.detectChanges()}finalizar(){this.examen.opinion=this.opinion,this.examen.calificaci\u00f3n=this.examen.calificaci\u00f3n/this.pruebaSelect.preguntas.length*10;let e=r.findIndex(this.pruebas,{id:this.idSelect}),t=r.find(this.pruebas,{id:this.idSelect});t.entregas.push(this.examen);let n=0,a=0;for(let r of t.entregas)n+=r.calificaci\u00f3n,a+=r.tiempoTotal;let i=a/t.entregas.length;t.mediaNota=n/t.entregas.length,t.mediaTiempo=i,this.pruebas.splice(e,1,t),localStorage.setItem("pruebas",JSON.stringify(this.pruebas));let o=JSON.parse(localStorage.getItem("completadas_"+this.user))||[];o.push(this.idSelect),localStorage.setItem("completadas_"+localStorage.getItem("user"),JSON.stringify(o));let s=JSON.parse(localStorage.getItem("falladas_"+this.user))||[],c=0;for(let r of this.examen.preguntas)"NO"==r.correcta&&s.push({tipo:t.tipo,pregunta:t.preguntas[c]}),c++;localStorage.setItem("falladas_"+localStorage.getItem("user"),JSON.stringify(s)),alert("Tarea finalizada y guardada correctamente"),this.showPrueba=!1,this.showEvaluacion=!1,this.showTabla=!0,this.changeDetectorRef.detectChanges(),this.router.navigate(["/home"])}continuar(){this.cronometro("restart");let e={correcta:this.respuestaCorrecta==this.respuesta?"SI":"NO",tiempo:this.cronoResta,respuesta:this.respuesta};this.examen.preguntas.push(e),this.examen.tiempoTotal=this.examen.tiempoTotal+this.cronoResta,"SI"==e.correcta&&(this.examen.calificaci\u00f3n=this.examen.calificaci\u00f3n+1),this.preguntaActual++,this.pruebaSelect.preguntas.length==this.preguntaActual?(this.showPrueba=!1,this.showEvaluacion=!0,this.showTabla=!1,this.cronometro("end")):(this.claseSeleccionadaA="",this.claseSeleccionadaB="",this.claseSeleccionadaC="",this.claseSeleccionadaD="",this.pregunta=this.pruebaSelect.preguntas[this.preguntaActual].pregunta,this.respuesta="",this.respuestaCorrecta=this.pruebaSelect.preguntas[this.preguntaActual].correcta,this.opcionA=this.pruebaSelect.preguntas[this.preguntaActual].respuestas?this.pruebaSelect.preguntas[this.preguntaActual].respuestas[0].texto:"",this.opcionB=this.pruebaSelect.preguntas[this.preguntaActual].respuestas?this.pruebaSelect.preguntas[this.preguntaActual].respuestas[1].texto:"",this.opcionC=this.pruebaSelect.preguntas[this.preguntaActual].respuestas?this.pruebaSelect.preguntas[this.preguntaActual].respuestas[2].texto:"",this.opcionD=this.pruebaSelect.preguntas[this.preguntaActual].respuestas?this.pruebaSelect.preguntas[this.preguntaActual].respuestas[3].texto:"",this.numero++,this.changeDetectorRef.detectChanges())}cronometro(e){"start"==e?this.cronoInit=new Date:"end"==e?(this.cronoResta="",this.cronoInit="",this.cronoEnd=""):(this.cronoEnd=new Date,this.cronoResta=this.cronoEnd.getTime()-this.cronoInit.getTime(),this.cronoResta=Math.round(this.cronoResta/1e3),this.cronoInit=this.cronoEnd,this.cronoEnd="")}seleccionarOopcion(e){"A"==e?(this.respuesta="A",this.claseSeleccionadaA="secondary",this.claseSeleccionadaB="",this.claseSeleccionadaC="",this.claseSeleccionadaD=""):"B"==e?(this.respuesta="B",this.claseSeleccionadaA="",this.claseSeleccionadaB="secondary",this.claseSeleccionadaC="",this.claseSeleccionadaD=""):"C"==e?(this.respuesta="C",this.claseSeleccionadaA="",this.claseSeleccionadaB="",this.claseSeleccionadaC="secondary",this.claseSeleccionadaD=""):"D"==e&&(this.respuesta="D",this.claseSeleccionadaA="",this.claseSeleccionadaB="",this.claseSeleccionadaC="",this.claseSeleccionadaD="secondary"),this.changeDetectorRef.detectChanges()}salir(){this.router.navigate(["/home"])}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](s.g))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-tareaspendientes"]],decls:12,vars:3,consts:[["size","10"],["size","2"],["color","primary",1,"home",3,"click"],["name","home-outline"],[4,"ngIf"],[1,"ag-theme-balham",2,"width","100%","height","50%",3,"rowData","columnDefs","rowSelection","selectionChanged","firstDataRendered"],["expand","full",3,"click",4,"ngIf"],["expand","full",3,"click"],[2,"text-align","center"],[3,"ngModel","ngModelChange"],["position","floating"],["disabled","true",3,"ngModel","ngModelChange"],["position","stacked"],["onkeyup","this.value = this.value.toUpperCase();",3,"ngModel","ngModelChange"],[3,"color","click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"ion-header"),c["\u0275\u0275elementStart"](1,"ion-toolbar"),c["\u0275\u0275elementStart"](2,"ion-row"),c["\u0275\u0275elementStart"](3,"ion-col",0),c["\u0275\u0275elementStart"](4,"ion-title"),c["\u0275\u0275text"](5,"MIS TAREAS PENDIENTES"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"ion-col",1),c["\u0275\u0275elementStart"](7,"ion-button",2),c["\u0275\u0275listener"]("click",(function(){return t.salir()})),c["\u0275\u0275element"](8,"ion-icon",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](9,p,3,4,"ion-content",4),c["\u0275\u0275template"](10,h,8,1,"ion-content",4),c["\u0275\u0275template"](11,g,9,4,"ion-content",4)),2&e&&(c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngIf",t.showTabla),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showEvaluacion),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showPrueba))},directives:[o.m,o.F,o.x,o.j,o.E,o.d,o.n,a.i,o.k,l.AgGridAngular,o.p,o.t,o.D,o.K,i.d,i.e,o.o,o.u,o.l],styles:[""]}),e})()}];let f=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[s.i.forChild(S)],s.i]}),e})(),b=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.b,i.a,o.G,f,l.AgGridModule.withComponents([])]]}),e})()}}]);