(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{yQXb:function(e,t,a){"use strict";a.r(t),a.d(t,"AnalisisPageModule",(function(){return w}));var n=a("ofXK"),i=a("3Pt+"),o=a("TEn/"),l=a("tyNb"),s=a("LvDl"),r=a("fXoL"),d=a("nVU4");function c(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"ion-button",8),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().analizar()})),r["\u0275\u0275text"](1,"ACTUALIZAR ESTUDIO"),r["\u0275\u0275elementEnd"]()}}function m(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"ion-list-header"),r["\u0275\u0275text"](1," Riesgos detectados "),r["\u0275\u0275elementEnd"]())}function u(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"ion-list-header"),r["\u0275\u0275text"](1," No se ha detectado ningun riesgo "),r["\u0275\u0275elementEnd"]())}function p(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"ion-item-sliding"),r["\u0275\u0275elementStart"](1,"ion-item"),r["\u0275\u0275elementStart"](2,"ion-label"),r["\u0275\u0275elementStart"](3,"h2"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"h3"),r["\u0275\u0275text"](6,"Asingatura: Matem\xe1ticas"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"p"),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"ion-item-options",10),r["\u0275\u0275elementStart"](10,"ion-item-option",11),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const a=t.$implicit;return r["\u0275\u0275nextContext"](2).abrir(a)})),r["\u0275\u0275text"](11,"ABRIR"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("Estudiante: ",e.alumno,""),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](e.mensaje)}}function g(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ion-list"),r["\u0275\u0275template"](1,m,2,0,"ion-list-header",5),r["\u0275\u0275template"](2,u,2,0,"ion-list-header",5),r["\u0275\u0275template"](3,p,12,2,"ion-item-sliding",9),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.riesgos&&e.riesgos.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!e.riesgos.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.riesgos)}}function h(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ion-card"),r["\u0275\u0275elementStart"](1,"ion-card-header"),r["\u0275\u0275elementStart"](2,"ion-card-title"),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"ion-card-subtitle"),r["\u0275\u0275text"](5,"Asingatura: Matem\xe1ticas"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"ion-card-content"),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"]("Estudiante: ",e.modalData.alumno,""),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"](" ",e.modalData.mensaje," ")}}function f(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"ag-grid-angular",12),r["\u0275\u0275listener"]("firstDataRendered",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onFirstDataRendered(t)})),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("rowData",e.rowData)("columnDefs",e.columnDefs)("rowSelection",e.rowSelection)}}function S(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"ion-button",13),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().cerrar()})),r["\u0275\u0275text"](1,"CERRAR"),r["\u0275\u0275elementEnd"]()}}function b(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"ion-button",8),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]();return t.normalizar(t.modalData)})),r["\u0275\u0275text"](1,"IGNORAR RIESGO"),r["\u0275\u0275elementEnd"]()}}const v=[{path:"",component:(()=>{class e{constructor(e,t){this.changeDetectorRef=e,this.router=t,this.lista=!0,this.detalle=!1,this.profesor=localStorage.getItem("user"),this.pruebas=JSON.parse(localStorage.getItem("pruebas"))||[],this.misPruebas=s.filter(this.pruebas,{profesor:this.profesor})||[],this.modalData={},this.riesgos=JSON.parse(localStorage.getItem("riesgos"))||[],this.columnDefs=[{headerName:"Nombre de la Prueba",field:"titulo",sortable:!0,filter:!0},{headerName:"Asignatura",field:"asignatura",sortable:!0,filter:!0},{headerName:"Calificaci\xf3n",field:"nota",sortable:!0,filter:!0,valueParser:this.numberParser,cellStyle:this.cellStyle},{headerName:"Tiempo",field:"tiempo",sortable:!0,filter:!0,valueParser:this.numberParser,cellStyle:this.cellStyle}],this.rowData=[],this.rowSelection="single"}cellStyle(e){let t="",a=JSON.parse(localStorage.getItem("pruebas"))||[],n=s.find(a,{id:e.data.id})?s.find(a,{id:e.data.id}).mediaTiempo:null,i=s.find(a,{id:e.data.id})?s.find(a,{id:e.data.id}).mediaNota:null,o=s.find(a,{id:e.data.id})?s.find(a,{id:e.data.id}).tiempoEstimado:null;if("nota"==e.colDef.field)return e.value<i?t="lightcoral":e.value==i?t="":e.value>i&&(t="lightgreen"),{backgroundColor:t};{let a=(n+o)/2;return a=Math.trunc(a),e.value>a?t="lightcoral":e.value==a?t="":e.value<a&&(t="lightgreen"),{backgroundColor:t}}}numberParser(e){var t=e.newValue;return null==t||""===t?null:parseFloat(e.newValue)}ngOnInit(){if(!this.riesgos.length){let e={},t=[],a=[];for(let i of this.misPruebas)for(let e of i.entregas)e.calificaci\u00f3n<5&&e.calificaci\u00f3n<i.mediaNota&&a.push(e),e.tiempoTotal>i.mediaTiempo&&e.tiempoTotal>i.tiempoEstimado&&t.push(e);for(let i of a)e[i.alumno]||(e[i.alumno]={notas:[],tiempo:[]}),e[i.alumno].notas.push(i);for(let i of t)e[i.alumno]||(e[i.alumno]={notas:[],tiempo:[]}),e[i.alumno].tiempo.push(i);let n=this.misPruebas.length;for(let i in e){let t={alumno:i,mensaje:null,id:Math.floor(1e5*Math.random()),nota:e[i].notas,tiempo:e[i].tiempo},a=JSON.parse(localStorage.getItem("entregasRefuerzo_"+i))||[],o="";if(a){let e=0;for(let t of a)t<5&&e++;e>a.length/3&&(o=" Por \xfaltimo, indicar que de las "+a.length+" tareas de refuerzo entregadas, no ha cumplido los requisitos m\xednimos en "+e+" de ellas. ")}e[i].notas.length>=n/2&&e[i].tiempo.length<n/2&&(t.mensaje=i+",del grupo de 6\xbaA Primaria, est\xe1 teniendo dificultades en la asigntara de Matem\xe1ticas. De las \xfaltimas "+n+" pruebas ha suspendido "+e[i].notas.length+". Adem\xe1s la nota media de la clase es superior a su nivel actual."+o+"A continuaci\xf3n se mostrar\xe1n los datos de las pruebas en las que el estudiante no ha dado el nivel esperado:"),e[i].tiempo.length>=n/2&&e[i].notas.length<n/2&&(t.mensaje=i+",del grupo de 6\xbaA Primaria, est\xe1 teniendo dificultades en los tiempos de lectura / ejecuci\xf3n de los ejercicios de la asigntara de Matem\xe1ticas. De las \xfaltimas "+n+" ha tenido un tiempo de ejecuci\xf3n elevado en  "+e[i].tiempo.length+" ocasiones. Adem\xe1s la capacidad lectora / resolutiva de la clase es superior a su nivel actual. "+o+"A continuaci\xf3n se mostrar\xe1n los datos de las pruebas en las que el estudiante ha tenido una resoluci\xf3n con un tiempo demasiado elevado:"),e[i].tiempo.length>=n/2&&e[i].notas.length>=n/2&&(t.mensaje=i+",del grupo de 6\xbaA Primaria, est\xe1 teniendo dificultades, tanto a nivel de tiempos de resoluci\xf3n como de resultados, en la asigntara de Matem\xe1ticas. De las \xfaltimas "+n+" pruebas ha suspendido "+e[i].notas.length+", superando el tiempo de resoluci\xf3n esperado en "+e[i].tiempo.length+" ejercicios. El nivel general de la clase es superior a su nivel actual."+o+"A continuaci\xf3n se mostrar\xe1n los datos de las pruebas en las que el estudiante ha tenido problemas:"),t.mensaje&&this.riesgos.push(t),localStorage.setItem("riesgos",JSON.stringify(this.riesgos))}}}analizar(){this.riesgos=[];let e={},t=[],a=[];for(let i of this.misPruebas)for(let e of i.entregas)e.calificaci\u00f3n<5&&e.calificaci\u00f3n<i.mediaNota&&a.push(e),e.tiempoTotal>i.mediaTiempo&&e.tiempoTotal>i.tiempoEstimado&&t.push(e);for(let i of a)e[i.alumno]||(e[i.alumno]={notas:[],tiempo:[]}),e[i.alumno].notas.push(i);for(let i of t)e[i.alumno]||(e[i.alumno]={notas:[],tiempo:[]}),e[i.alumno].tiempo.push(i);let n=this.misPruebas.length;for(let i in e){let t={alumno:i,mensaje:null,id:Math.floor(1e5*Math.random()),nota:e[i].notas,tiempo:e[i].tiempo},a=JSON.parse(localStorage.getItem("entregasRefuerzo_"+i))||[],o="";if(a){let e=0;for(let t of a)t<5&&e++;e>a.length/3&&(o=" Por \xfaltimo, indicar que de las "+a.length+" tareas de refuerzo entregadas, no ha cumplido los requisitos m\xednimos en "+e+" de ellas. ")}e[i].notas.length>=n/2&&e[i].tiempo.length<n/2&&(t.mensaje=i+",del grupo de 6\xbaA Primaria, est\xe1 teniendo dificultades en la asigntara de Matem\xe1ticas. De las \xfaltimas "+n+" pruebas ha suspendido "+e[i].notas.length+". Adem\xe1s la nota media de la clase es superior a su nivel actual."+o+"A continuaci\xf3n se mostrar\xe1n los datos de las pruebas en las que el estudiante no ha dado el nivel esperado:"),e[i].tiempo.length>=n/2&&e[i].notas.length<n/2&&(t.mensaje=i+",del grupo de 6\xbaA Primaria, est\xe1 teniendo dificultades en los tiempos de lectura / ejecuci\xf3n de los ejercicios de la asigntara de Matem\xe1ticas. De las \xfaltimas "+n+" ha tenido un tiempo de ejecuci\xf3n elevado en  "+e[i].tiempo.length+" ocasiones. Adem\xe1s la capacidad lectora / resolutiva de la clase es superior a su nivel actual. "+o+"A continuaci\xf3n se mostrar\xe1n los datos de las pruebas en las que el estudiante ha tenido una resoluci\xf3n con un tiempo demasiado elevado:"),e[i].tiempo.length>=n/2&&e[i].notas.length>=n/2&&(t.mensaje=i+",del grupo de 6\xbaA Primaria, est\xe1 teniendo dificultades, tanto a nivel de tiempos de resoluci\xf3n como de resultados, en la asigntara de Matem\xe1ticas. De las \xfaltimas "+n+" pruebas ha suspendido "+e[i].notas.length+", superando el tiempo de resoluci\xf3n esperado en "+e[i].tiempo.length+" ejercicios. El nivel general de la clase es superior a su nivel actual."+o+"A continuaci\xf3n se mostrar\xe1n los datos de las pruebas en las que el estudiante ha tenido problemas:"),t.mensaje&&this.riesgos.push(t),localStorage.setItem("riesgos",JSON.stringify(this.riesgos))}}salir(){this.router.navigate(["/home"])}onFirstDataRendered(e){this.gridApi=e.api,e.api.sizeColumnsToFit()}abrir(e){this.modalData=e,this.lista=!1,this.detalle=!0;let t=e.nota.concat(e.tiempo);this.rowData=[];for(let a of t){let e={titulo:a.idPrueba.split("_X")[0],id:a.idPrueba,asignatura:"Matem\xe1ticas",nota:a.calificaci\u00f3n,tiempo:a.tiempoTotal};s.find(this.rowData,{id:a.idPrueba})||this.rowData.push(e)}this.changeDetectorRef.detectChanges()}cerrar(){this.lista=!0,this.detalle=!1,this.changeDetectorRef.detectChanges()}normalizar(e){this.lista=!0,this.detalle=!1,s.remove(this.riesgos,(function(t){return t.id==e.id})),this.changeDetectorRef.detectChanges(),localStorage.setItem("riesgos",JSON.stringify(this.riesgos)),this.changeDetectorRef.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](r.ChangeDetectorRef),r["\u0275\u0275directiveInject"](l.g))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-analisis"]],decls:16,vars:6,consts:[["size","10"],["size","2"],["color","primary",1,"home",3,"click"],["name","home-outline"],["expand","full","color","success",3,"click",4,"ngIf"],[4,"ngIf"],["style","width: 100%; height: 30%;","class","ag-theme-balham",3,"rowData","columnDefs","rowSelection","firstDataRendered",4,"ngIf"],["expand","full",3,"click",4,"ngIf"],["expand","full","color","success",3,"click"],[4,"ngFor","ngForOf"],["side","end"],[3,"click"],[1,"ag-theme-balham",2,"width","100%","height","30%",3,"rowData","columnDefs","rowSelection","firstDataRendered"],["expand","full",3,"click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"ion-header"),r["\u0275\u0275elementStart"](1,"ion-toolbar"),r["\u0275\u0275elementStart"](2,"ion-row"),r["\u0275\u0275elementStart"](3,"ion-col",0),r["\u0275\u0275elementStart"](4,"ion-title"),r["\u0275\u0275text"](5,"ANALISIS DE RIESGOS"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"ion-col",1),r["\u0275\u0275elementStart"](7,"ion-button",2),r["\u0275\u0275listener"]("click",(function(){return t.salir()})),r["\u0275\u0275element"](8,"ion-icon",3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"ion-content"),r["\u0275\u0275template"](10,c,2,0,"ion-button",4),r["\u0275\u0275template"](11,g,4,3,"ion-list",5),r["\u0275\u0275template"](12,h,8,2,"ion-card",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](13,f,1,3,"ag-grid-angular",6),r["\u0275\u0275template"](14,S,2,0,"ion-button",7),r["\u0275\u0275template"](15,b,2,0,"ion-button",4)),2&e&&(r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("ngIf",t.lista),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.lista),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.detalle),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.detalle),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.detalle),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.detalle))},directives:[o.m,o.F,o.x,o.j,o.E,o.d,o.n,o.k,n.i,o.u,n.h,o.v,o.s,o.p,o.t,o.r,o.q,o.e,o.g,o.i,o.h,o.f,d.AgGridAngular],styles:[".red[_ngcontent-%COMP%]{background-color:#f08080}.green[_ngcontent-%COMP%]{background-color:#90ee90}.amber[_ngcontent-%COMP%]{background-color:#ffa07a}.yellow[_ngcontent-%COMP%]{background-color:#ff0}"]}),e})()}];let E=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[l.i.forChild(v)],l.i]}),e})(),w=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.b,i.a,o.G,E,d.AgGridModule.withComponents([])]]}),e})()}}]);